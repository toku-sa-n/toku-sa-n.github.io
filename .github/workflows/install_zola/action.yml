name: Install Zola
description: 'Install Zola from the source code'

runs:
  using: "composite"

  steps:
    # We build a Zola executable from the source code for these reasons:
    # - The Zola executable built by `cargo install zola` is too old. See https://github.com/getzola/zola/issues/1919.
    # - Zola executables released in https://github.com/getzola/zola/releases do not support Japaneses.
    - name: Fetch the Zola source code
      run: git clone https://github.com/getzola/zola

    - name: Build a Zola executable
      run: cargo install --path . --features search/indexing-ja
      working-directory: zola
