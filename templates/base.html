<!DOCTYPE html>
<html lang="{{ lang }}" data-theme="dark">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="dark light">

    <script>
      // 初期描画前にテーマを決定して FOUC を防ぐ
      (() => {
        const stored = localStorage.getItem('theme');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        const theme = stored || (prefersDark ? 'dark' : 'light');
        document.documentElement.setAttribute('data-theme', theme);
      })();
    </script>

    {% block ogp %}
    {% endblock %}

    <link rel="apple-touch-icon" sizes="180x180" href="{{ get_url(path="favicons/apple-touch-icon.png") }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ get_url(path="favicons/favicon-32x32.png") }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ get_url(path="favicons/favicon-16x16.png") }}">
    <link rel="manifest" href="{{ get_url(path="favicons/site.webmanifest") }}">

    <link rel="stylesheet" href="{{ get_url(path="base.css") }}">

    <title>{{ config.title }}</title>
  </head>

  <body>
    <header class="site-header">
      <h1><a href="{{ get_url(path="/") }}">{{ config.title }}</a></h1>
      <button id="theme-toggle" class="theme-toggle" type="button" aria-pressed="false" aria-label="テーマ切替">
        <span class="theme-toggle__icon theme-toggle__icon--moon" aria-hidden="true">
          <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path d="M21 12.79A9 9 0 0 1 11.21 3 7.5 7.5 0 1 0 21 12.79z" />
          </svg>
        </span>
        <span class="theme-toggle__icon theme-toggle__icon--sun" aria-hidden="true">
          <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <circle cx="12" cy="12" r="4" />
            <g stroke="currentColor" stroke-width="2" stroke-linecap="round">
              <line x1="12" y1="2" x2="12" y2="5" />
              <line x1="12" y1="19" x2="12" y2="22" />
              <line x1="4.22" y1="4.22" x2="6.34" y2="6.34" />
              <line x1="17.66" y1="17.66" x2="19.78" y2="19.78" />
              <line x1="2" y1="12" x2="5" y2="12" />
              <line x1="19" y1="12" x2="22" y2="12" />
              <line x1="4.22" y1="19.78" x2="6.34" y2="17.66" />
              <line x1="17.66" y1="6.34" x2="19.78" y2="4.22" />
            </g>
          </svg>
        </span>
      </button>
    </header>

    <div class="container">
      <main>
        {% block content %}
        {% endblock %}
      </main>

      <nav>
        {% block sidemenu %}
        {% endblock %}
      </nav>
    </div>

    <script src="{{ get_url(path="js/theme.js") }}" defer></script>
  </body>

</html>
